<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.library.mapper.ReviewMapper">

    <!-- request Body 요청 데이터를 DB에 저장-->
    <insert id="saveReview" parameterType="com.project.library.dto.request.ReviewRequestDto" useGeneratedKeys="true"
            keyProperty="id">

        insert into review (content, createdAt, writer, deleteStatus, memberId, bookId)
        values ( #{content}
               , now()
               , #{writer}
               , true
               , #{memberId}
               , #{bookId});

    </insert>

    <update id="updateReview" parameterType="com.project.library.dto.request.ReviewRequestDto">
        update review
        set id         = #{id}
          , content    = #{content}
          , modifiedAt = now()
          , writer = #{writer}
        where id = #{id}
    </update>

</mapper>